{{ $ephemeral := false -}}
{{ $headless := false -}}
{{ $personal := false -}}
{{ $sudoCommand := "sudo " -}}
{{ $email := "njosol@pm.me" -}}

{{ $osid := .chezmoi.os -}}
{{ if (and (eq .chezmoi.os "linux") (hasKey .chezmoi.osRelease "id")) -}}
    {{ $osid = printf "%s-%s" .chezmoi.os .chezmoi.osRelease.id -}}
{{ end -}}

{{/* detect GitHub codespaces, VSCode remote containers, Docker containers, Multipass VMs, and Vagrant boxes */}}
{{- if or (env "CODESPACES") (env "REMOTE_CONTAINERS_IPC") (eq .chezmoi.username "root" "ubuntu" "vagrant" "vscode") -}}
{{-   $ephemeral = true -}}
{{-   $headless = true -}}
{{ end -}}

{{ if eq .chezmoi.hostname "xps-13" -}}
    {{ $personal = true -}}
{{ end -}}

{{ $installCommand := "" -}}
{{ if eq $osid "linux-fedora" -}}
{{   $installCommand = "dnf install -y" -}}
{{ end -}}

{{ if eq .chezmoi.username "root" -}}
{{   $sudoCommand = "" -}}
{{ end -}}

[data]
  {{- /* Control variables */}}
  ephemeral = {{ $ephemeral }}
  headless = {{ $headless }}
  personal = {{ $personal }}
  osid = {{ $osid | quote }}

  {{- /* Command variables */}}
  sudoCommand = {{ $sudoCommand | quote }}
  installCommand = {{ $installCommand | quote }}

  {{- /* Information variables */}}
  email = {{ $email | quote }}
